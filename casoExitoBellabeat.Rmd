---
title: "Estudio de Caso: Bellabeat - Google Data Analytics"
author: "Angela Maria Zea Mesa"
date: "`r Sys.Date()`"
output: html_document
---

# Fase 1: Preguntar

## Tarea empresarial

Bellabeat es una empresa de tecnolog√≠a enfocada en el bienestar de la mujer. La organizaci√≥n desea comprender c√≥mo los consumidores usan los dispositivos inteligentes, con el fin de descubrir oportunidades de crecimiento, y orientar su estrategia de marketing. El equipo ejecutivo quiere utilizar esta informaci√≥n para identificar c√≥mo los productos de Bellabeat pueden beneficiarse de estas tendencias.

**Tarea principal:**  
Analizar los datos de uso de dispositivos inteligentes (no Bellabeat) para identificar patrones clave que puedan ser aplicados a un producto de Bellabeat y as√≠ generar recomendaciones de alto nivel para su estrategia de marketing.

## Preguntas orientadoras

1. ¬øCu√°les son algunas tendencias en el uso de dispositivos inteligentes?
2. ¬øC√≥mo podr√≠an aplicarse estas tendencias a los clientes de Bellabeat?
3. ¬øC√≥mo podr√≠an estas tendencias ayudar a influir en la estrategia de marketing de Bellabeat?

## Partes interesadas clave

- **Ur≈°ka Sr≈°en:** Cofundadora y directora creativa de Bellabeat.
- **Sando Mur:** Cofundador y miembro del equipo ejecutivo.
- **Equipo de an√°lisis de marketing:** Encargado de guiar las decisiones estrat√©gicas.
- **Analista de datos j√∫nior (yo):** Encargado del an√°lisis y presentaci√≥n de hallazgos.

## Contribuci√≥n del an√°lisis de datos

Este an√°lisis busca:

- Identificar patrones de comportamiento en usuarios de dispositivos inteligentes.
- Detectar oportunidades para personalizar y mejorar los productos Bellabeat.
- Brindar recomendaciones estrat√©gicas y sostenibles a partir de datos reales.


# Fase 2: Preparar

En esta fase se realiza la recopilaci√≥n de datos relevantes para el an√°lisis. Se utilizan datos p√∫blicos extra√≠dos del repositorio de Kaggle que contienen informaci√≥n de 30 usuarios de dispositivos Fitbit, quienes accedieron a compartir sus datos personales generados mediante el seguimiento de su actividad f√≠sica, sue√±o y h√°bitos de salud durante un per√≠odo de 31 d√≠as.

## Origen de los datos
Los datos fueron proporcionados por M√∂bius a trav√©s del portal Kaggle. Este conjunto incluye m√∫ltiples archivos CSV, entre los cuales destacan:

- dailyActivity_merged.csv: informaci√≥n sobre pasos diarios, distancia, minutos activos y tiempo sedentario.

- sleepDay_merged.csv: datos sobre minutos dormidos, tiempo en cama y registros de sue√±o.

Estos datos ser√°n utilizados para realizar un an√°lisis exploratorio con el fin de identificar patrones que permitan a Bellabeat comprender mejor el comportamiento de sus usuarios y as√≠ apoyar la toma de decisiones estrat√©gicas.

## Credibilidad de los datos
Aunque los datos provienen de un entorno controlado y voluntario, su origen no est√° verificado por una entidad oficial o cient√≠fica, lo que debe tenerse en cuenta al interpretar los resultados. No obstante, debido a la naturaleza del caso de estudio y su prop√≥sito exploratorio, los datos se consideran adecuados para el an√°lisis.

## Licencia de uso
Los datos est√°n disponibles de forma p√∫blica bajo la licencia de uso de Kaggle. Se permite su uso para fines educativos y de an√°lisis sin fines de lucro, como el presente caso de estudio.


# Fase 3: Procesar los datos - Limpieza y preparaci√≥n

```{r}
# Cargar librer√≠as necesarias
library(tidyverse)
library(lubridate)
library(janitor)
library(corrplot)
```

```{r}
# Cargar los archivos CSV
daily_activity <- read_csv("dailyActivity_merged.csv") %>% clean_names()
minute_sleep <- read_csv("minuteSleep_merged.csv") %>% clean_names()
```

```{r}
# Convertir las fechas al formato adecuado
daily_activity <- daily_activity %>%
  mutate(activity_date = mdy(activity_date))

minute_sleep <- minute_sleep %>%
  mutate(date = mdy_hms(date))  # columna 'date' ya existe
```

```{r}
# Eliminar duplicados
daily_activity <- daily_activity %>% distinct()
minute_sleep <- minute_sleep %>% distinct()

# Revisar si hay valores faltantes
sum(is.na(daily_activity))
sum(is.na(minute_sleep))
```

```{r}
# Crear un resumen diario de minutos dormidos por usuario
sleep_summary <- minute_sleep %>%
  filter(value == 1) %>%  # 1 indica que estaba dormido
  group_by(id, date) %>%
  summarise(total_minutes_asleep = n()) %>%
  ungroup()
```

```{r}
# Unir los datasets
combined_data <- left_join(daily_activity, sleep_summary, by = c("id" = "id", "activity_date" = "date"))

# Eliminar NA en columnas clave para evitar errores en an√°lisis posteriores
combined_data <- combined_data %>%
  drop_na(total_steps, total_minutes_asleep)
```

```{r}
# Revisar el dataset combinado
glimpse(combined_data)
summary(combined_data)
```

En esta fase se realiz√≥ la limpieza, transformaci√≥n y uni√≥n de los datos extra√≠dos de los dispositivos Fitbit, con el fin de facilitar su an√°lisis. Se trabaj√≥ principalmente con dos archivos:

- dailyActivity_merged.csv: contiene el resumen diario de actividad f√≠sica de cada usuario.

- minuteSleep_merged.csv: contiene registros minuto a minuto de los periodos de sue√±o.

Se aplicaron las siguientes transformaciones:

- Limpieza de nombres de columnas con janitor::clean_names() para estandarizar y facilitar su uso.

- Conversi√≥n de fechas al formato adecuado utilizando lubridate::mdy() y mdy_hms(), permitiendo realizar agrupaciones y cruces por d√≠a.

- Filtrado de los registros de sue√±o, manteniendo √∫nicamente los minutos en los que el usuario efectivamente estuvo dormido (value == 1).

- Agrupaci√≥n de los datos de sue√±o por id y fecha, calculando el total de minutos dormidos por d√≠a.

- Uni√≥n de los datasets de actividad y sue√±o mediante left_join(), usando como claves el id del usuario y la fecha.

- Eliminaci√≥n de valores faltantes (NA) en variables clave como total_steps y total_minutes_asleep para garantizar la consistencia en los an√°lisis posteriores.

El resultado es un conjunto de datos consolidado llamado combined_data, que permite explorar la relaci√≥n entre variables como pasos, minutos de actividad y sue√±o. Esta preparaci√≥n deja la base lista para iniciar la fase de an√°lisis exploratorio.


# Fase 4: Analizar

### Exploraci√≥n y an√°lisis de los datos
A partir del conjunto de datos limpio y consolidado, se lleva a cabo un an√°lisis exploratorio con el fin de identificar patrones y relaciones entre variables relevantes. El prop√≥sito es comprender c√≥mo los h√°bitos de sue√±o, actividad f√≠sica y sedentarismo se interrelacionan, y de qu√© forma estos comportamientos pueden guiar decisiones estrat√©gicas para mejorar el bienestar de las usuarias y orientar la estrategia de marketing de Bellabeat.

### 1. üìä Ver distribuci√≥n de pasos diarios
```{r}
# Calcular promedio de pasos para destacar en la anotaci√≥n
avg_steps <- mean(combined_data$total_steps, na.rm = TRUE)

ggplot(combined_data, aes(x = total_steps)) +
  geom_histogram(binwidth = 1000, fill = "darkolivegreen", color = "white") +
  geom_vline(aes(xintercept = avg_steps), color = "red", linetype = "dashed", size = 1) +
  annotate("text", x = avg_steps + 500, y = 30, label = paste("Promedio:", round(avg_steps)), color = "red", hjust = 0) +
  labs(
    title = "Distribuci√≥n de pasos diarios",
    subtitle = "La mayor√≠a de los usuarios da entre 5,000 y 10,000 pasos por d√≠a",
    x = "Pasos diarios",
    y = "Cantidad de usuarios"
  ) +
  theme_minimal()
```

La distribuci√≥n de pasos diarios revela que la mayor√≠a de los usuarios camina entre 5,000 y 10,000 pasos al d√≠a. Este rango suele asociarse con una actividad f√≠sica moderada, aunque una parte significativa de los usuarios da menos de 5,000 pasos, lo que podr√≠a indicar un estilo de vida sedentario. El promedio de pasos diarios est√° alrededor de `r round(avg_steps)`, lo cual puede ser √∫til como punto de referencia para definir metas de actividad en las estrategias de marketing de Bellabeat.

### 2. üìà Relaci√≥n entre pasos y minutos dormidos
```{r}
# Agrupar por fecha y calcular total de pasos diarios
daily_steps <- combined_data %>%
  group_by(activity_date) %>%
  summarise(total_steps = sum(total_steps, na.rm = TRUE))

# Asegurar que activity_date sea tipo fecha
daily_steps$activity_date <- as.Date(daily_steps$activity_date)

# Crear gr√°fico de l√≠nea con suavizado
ggplot(daily_steps, aes(x = activity_date, y = total_steps)) +
  geom_line(color = "steelblue") +
  geom_smooth(method = "loess", se = FALSE, color = "darkred") +
  labs(
    title = "Tendencia de pasos diarios a lo largo del tiempo",
    subtitle = "Con l√≠nea de tendencia suavizada (LOESS)",
    x = "Fecha",
    y = "Total de pasos"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

El gr√°fico de l√≠nea permite observar la evoluci√≥n de los pasos diarios durante el periodo registrado. Se pueden identificar picos de actividad, as√≠ como d√≠as con una baja significativa en la cantidad de pasos. Este tipo de an√°lisis es √∫til para detectar comportamientos repetitivos (como disminuci√≥n de actividad los fines de semana) y puede orientar estrategias para promover la constancia en la actividad f√≠sica.

### 3. üìå Correlaci√≥n num√©rica
```{r}
# Calcular la matriz de correlaci√≥n
cor_matrix <- combined_data %>%
  select(total_steps, very_active_minutes, lightly_active_minutes, sedentary_minutes, total_minutes_asleep) %>%
  cor(use = "pairwise.complete.obs")

# Convertir a formato largo para ggplot
library(reshape2)
cor_data <- melt(cor_matrix)

# Crear heatmap con ggplot
library(ggplot2)
ggplot(cor_data, aes(x = Var1, y = Var2, fill = value)) +
  geom_tile(color = "white") +
  scale_fill_gradient2(
    low = "red", mid = "white", high = "blue",
    midpoint = 0, limit = c(-1, 1),
    name = "Correlaci√≥n"
  ) +
  geom_text(aes(label = round(value, 2)), color = "black", size = 4) +
  labs(
    title = "Matriz de correlaci√≥n entre variables de actividad y sue√±o",
    x = "", y = ""
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1))
```

El gr√°fico muestra de forma clara la intensidad y direcci√≥n de las relaciones entre diferentes variables relacionadas con la actividad f√≠sica y el sue√±o.

- Pasos totales (total_steps) presentan una correlaci√≥n moderada a fuerte con los minutos de actividad ligera y muy activa, lo que sugiere que quienes caminan m√°s tambi√©n tienen m√°s actividad f√≠sica, como es de esperarse.

- La relaci√≥n con minutos sedentarios y minutos dormidos es cercana a cero, lo que indica que no hay una asociaci√≥n directa entre caminar m√°s y dormir m√°s o estar m√°s tiempo sedentario.

- La relaci√≥n entre minutos de sue√±o y otras variables tambi√©n es muy d√©bil, lo cual puede sugerir que el descanso no depende directamente del nivel de actividad registrado.

Este tipo de an√°lisis permite a Bellabeat identificar cu√°les comportamientos est√°n m√°s conectados entre s√≠. En este caso, podr√≠a enfocarse en fomentar tanto la actividad ligera como la intensa, ya que ambas se relacionan directamente con un mayor nivel de movimiento general. Por otro lado, si la empresa desea mejorar los h√°bitos de sue√±o de sus usuarias, deber√° explorar otras variables, dado que el nivel de actividad f√≠sica no parece influir de manera significativa en la duraci√≥n del sue√±o seg√∫n estos datos.


# Fase 5: Compartir

### Resumen ejecutivo del an√°lisis
Este an√°lisis exploratorio de los datos de dispositivos inteligentes permiti√≥ identificar patrones clave en los h√°bitos de sue√±o y actividad f√≠sica de los usuarios, lo cual aporta informaci√≥n valiosa para orientar la estrategia de marketing de Bellabeat.

### Principales hallazgos
- La mayor√≠a de los usuarios da entre 5.000 y 10.000 pasos diarios, lo que refleja un nivel de actividad moderado. Sin embargo, una proporci√≥n significativa no alcanza este rango, lo cual representa una oportunidad para promover h√°bitos m√°s activos.

- Existe una correlaci√≥n positiva entre los pasos diarios y el tiempo de actividad f√≠sica ligera, y una relaci√≥n m√°s moderada con la actividad muy intensa. Esto indica que incentivar peque√±as rutinas activas puede tener un alto impacto en el bienestar diario.

- No se evidenci√≥ una relaci√≥n fuerte entre el nivel de actividad y el tiempo de sue√±o, lo cual sugiere que las campa√±as de marketing enfocadas en sue√±o deben abordar este comportamiento como un factor independiente.

### Recomendaciones para Bellabeat
- ‚úî Crear contenido educativo y motivacional que promueva caminatas ligeras y pausas activas diarias.
- ‚úî Dise√±ar campa√±as que diferencien los enfoques para mejorar el sue√±o y la actividad f√≠sica, al no estar directamente correlacionados.
- ‚úî Usar estos insights para ajustar recordatorios personalizados en la app de Bellabeat, que fomenten el movimiento sin exigir rutinas intensas.


### Limitaciones del an√°lisis
- El conjunto de datos incluye informaci√≥n de solo 30 usuarios y un periodo limitado de tiempo (31 d√≠as), lo cual puede no representar toda la diversidad de comportamientos de usuarias de Bellabeat.

- La fuente de datos no proviene directamente de dispositivos Bellabeat, por lo tanto, los patrones deben considerarse como referenciales y no concluyentes.


# Fase 6: Actuar
A partir de los hallazgos obtenidos, se proponen acciones concretas para que Bellabeat optimice su estrategia de marketing y desarrollo de productos en funci√≥n del comportamiento observado en los usuarios de dispositivos inteligentes.

### üìå Recomendaciones estrat√©gicas
- Promover la actividad f√≠sica ligera y constante
Dado que los pasos diarios muestran mayor correlaci√≥n con minutos de actividad ligera, se recomienda centrar las campa√±as en peque√±os cambios sostenibles: caminar m√°s, estirarse cada cierto tiempo, rutinas suaves.

- Incluir rutinas de alta intensidad en los planes personalizados
Aunque la relaci√≥n no es tan fuerte, los minutos de actividad muy activa tambi√©n influyen en la cantidad de pasos. Bellabeat podr√≠a ofrecer programas mixtos (ligeros e intensos), adaptados al estilo de vida de cada usuaria.

- Incentivar la constancia diaria con alertas o notificaciones
Se evidencian variaciones diarias en la cantidad de pasos. Se sugiere implementar recordatorios motivacionales o desaf√≠os diarios desde la app para reducir la inactividad en d√≠as bajos.

- Evitar vincular directamente el sue√±o con la actividad
La d√©bil correlaci√≥n sugiere que no se puede establecer una relaci√≥n directa entre sue√±o y pasos. Bellabeat debe considerar estrategias independientes para mejorar el sue√±o (como sonidos relajantes, meditaciones, rutinas nocturnas) sin asociarlas directamente al nivel de actividad f√≠sica.

- Segmentar usuarias seg√∫n su nivel de actividad
Crear perfiles (sedentaria, moderadamente activa, activa) permite personalizar la experiencia dentro de la app, estableciendo objetivos progresivos y recomendaciones adaptadas.